name: 'Martini Upload Package'
description: 'Prepares and uploads packages to a Martini instance'
author: 'Rafal Janicki <rafal.janicki@torocloud.com>'

inputs:
  BASE_URL:
    description: 'Base URL of the Martini instance'
    required: true
  MARTINI_ACCESS_TOKEN:
    description: 'Access token of the Martini instance'
    required: true
  PACKAGE_DIR:
    description: 'Path to the directory containing package folders'
    required: false
    default: 'packages'
  PACKAGE_NAME_PATTERN:
    description: 'Regex pattern to match package directories'
    required: false
    default: '.*'
  ASYNC_UPLOAD:
    description: 'Enable async upload'
    required: false
    default: 'false'
  SUCCESS_CHECK_TIMEOUT:
    description: 'Timeout for success check in seconds'
    required: false
    default: '6'
  SUCCESS_CHECK_DELAY:
    description: 'Delay between success checks in seconds'
    required: false
    default: '30'
  SUCCESS_CHECK_PACKAGE_NAME:
    description: 'Name of the package to check for success'
    required: false
    default: ''

runs:
  using: 'node20'
  main: 'dist/index.js'